# Проект 'Виджет банковских операций'

## Описание:

Проект 'Виджет банковских операций' - это виджет, который показывает несколько последних
успешных банковских операций клиента.

## Установка:

1. Клонируйте репозиторий:
   ```
   git clone git@github.com:Tishina-az/homework_m2.git
   ```
2. Установите зависимости:

*Раздел находится в разработке.*

3. Установите фреймворк `pytest` и библиотеку `pytest-cov`:
   ```
   # Установка фреймворка
   poetry add --group tests pytest
   # Установка библиотеки pytest-cov
   poetry add --group tests pytest-cov
   ```

## Использование функций:

1. Работа функций в модуле `masks`:
    - Функция `get_mask_card_number` принимает на вход номер карты и возвращает ее маску. 
   Номер карты замаскирован и отображается в формате `XXXX XX** **** XXXX`, где `X` — это цифра номера.
   Пример работы функции:
   ```
    7000792289606361     # входной аргумент
    7000 79** **** 6361  # выход функции
   ```
   - Функция `get_mask_account` принимает на вход номер счета и возвращает его маску. 
   Номер счета замаскирован и отображается в формате `**XXXX`, где `X` — это цифра номера.
   Пример работы функции:
   ```
    73654108430135874305  # входной аргумент
    **4305  # выход функции
   ```
   
2. Работа функций в модуле `widget`:
    - Функция `mask_account_card` принимает один аргумент — строку, типа `Visa Platinum 7000792289606361`, 
    или `Maestro 7000792289606361`, или `Счет 73654108430135874305`. 
    Разделять строку на 2 аргумента (отдельно имя, отдельно номер) **нельзя!**
    Возвращает строку с замаскированным номером, используя разные типы:
    ```
    # Пример для карты
    Visa Platinum 7000792289606361  # входной аргумент
    Visa Platinum 7000 79** **** 6361  # выход функции

    # Пример для счета
    Счет 73654108430135874305  # входной аргумент
    Счет **4305  # выход функции
    ```
   - Функция `get_date`, которая принимает на вход строку с датой в формате `"2024-03-11T02:26:18.671407"`
   и возвращает строку с датой в формате `"ДД.ММ.ГГГГ"` (`"11.03.2024"`).


3. Работа функций в модуле `processing`:
    - Функция `filter_by_state`, которая принимает список словарей и опционально значение для ключа 
    `state` (по умолчанию `'EXECUTED'`):
       ```
       # Выход функции со статусом по умолчанию 'EXECUTED'
       [{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, 
       {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}]
       
       # Выход функции, если вторым аргументов передано 'CANCELED'
       [{'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, 
       {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}]
       ```
    - Функция `sort_by_date`:
      ``` 
       # Выход функции (сортировка по убыванию, т. е. сначала самые последние операции)
       [{'id': 41428829, 'state': 'EXECUTED', 'date': '2019-07-03T18:35:29.512364'}, 
       {'id': 615064591, 'state': 'CANCELED', 'date': '2018-10-14T08:21:33.419441'}, {'id': 594226727, 'state': 'CANCELED', 'date': '2018-09-12T21:27:25.241689'}, {'id': 939719570, 'state': 'EXECUTED', 'date': '2018-06-30T02:08:58.425572'}]
      ```
4. Работа функций в модуле `generators`:
   - Функция `filter_by_currency` принимает на вход список словарей возвращаeт итератор, 
   который поочередно выдает транзакции, где валюта операции соответствует заданной (например, USD):
      ```
      usd_transactions = filter_by_currency(transactions, "USD")
      for _ in range(1):
      print(next(usd_transactions))
   
      >>>    {
             "id": 939719570,
             "state": "EXECUTED",
             "date": "2018-06-30T02:08:58.425572",
             "operationAmount": {
                 "amount": "9824.07",
                 "currency": {
                     "name": "USD",
                     "code": "USD"
                 }
             },
             "description": "Перевод организации",
             "from": "Счет 75106830613657916952",
             "to": "Счет 11776614605963066702"
         }
         ```
   - Генератор `transaction_descriptions` принимает список словарей с транзакциями и 
   возвращает описание каждой операции по очереди:
      ```
      descriptions = transaction_descriptions(transactions)
      for _ in range(5):
      print(next(descriptions))

      >>> Перевод организации
          Перевод со счета на счет
          Перевод со счета на счет
          Перевод с карты на карту
          Перевод организации
      ```
   - Генератор `card_number_generator` выдает номера банковских карт в формате `XXXX XXXX XXXX XXXX`, где 
   `X` — цифра номера карты. Генератор может сгенерировать номера карт
   в заданном диапазоне от `0000 0000 0000 0001` до `9999 9999 9999 9999`.
   Генератор должен принимать начальное и конечное значения для генерации диапазона номеров:
       ```
       for card_number in card_number_generator(1, 5):
          print(card_number)

       >>> 0000 0000 0000 0001
           0000 0000 0000 0002
           0000 0000 0000 0003
           0000 0000 0000 0004
           0000 0000 0000 0005
       ```
5. Работа декораторов в модуле `decorators`:
    - Декоратор `log` должен принимать необязательный аргумент `filename`, 
   который определяет, куда будут записываться логи (в файл или в консоль):
        ```
        @log(filename="mylog.txt")
        def my_function(x, y):
            return x + y

        my_function(1, 2)
      
        # Ожидаемый вывод в лог-файл mylog.txt при успешном выполнении:
        'Функция my_function работает корректно!
         Результат работы функции: 3. Время работы функции: 0.00000.'
      
        # Ожидаемый вывод при ошибке:
        'Функция my_function работает некорректно, ошибка:  тип ошибки. Входные данные: (1, 'f'), {}.'
        Где `тип ошибки` заменяется на текст ошибки.
        ```

## Тестирование:
1. Все тесты собраны в директории `tests` и разделены по модулям, согласно именам в директории `src`.
2. Для запуска тестов используйте установленный фреймворк `pytest`:
    ```
    # Для запуска тестов по всей директории test
    pytest
    # Для запуска тестов по отдельному модулю
    pyetest tests/test_masks.py
    ```
3. Запуск теста и формирование отчёта о покрытии кода тестами:
   ```
   # Запускаем тесты для оценки покрытия кода тестированием
   pytest --cov
   # Формирование отчета в формате html
   pytest --cov=src --cov-report=html
   ```

## Документация:

*Раздел находится в разработке.*

## Лицензия:

*Раздел находится в разработке.*
